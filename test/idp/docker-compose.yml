version: '3'
services:
  testsamlidp_idp:
    build: 
      context: .
      dockerfile: ./Dockerfile
      args:
        - ServerName=idp.route443.dev
    environment:
      SIMPLESAMLPHP_SP_ENTITY_ID: https://idp.route443.dev
      SIMPLESAMLPHP_SP_ASSERTION_CONSUMER_SERVICE: https://idp.route443.dev/simplesaml/module.php/saml/sp/saml2-acs.php/test-sp
      SIMPLESAMLPHP_SP_SINGLE_LOGOUT_SERVICE: https://idp.route443.dev/simplesaml/module.php/saml/sp/saml2-logout.php/test-sp
      SIMPLESAMLPHP_ADMIN_PASSWORD: admin
      SIMPLESAMLPHP_SECRET_SALT: salt
    ports:
    - "8080:8080"
    - "8443:8443"
    tty: true
